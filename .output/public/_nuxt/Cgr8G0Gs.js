class d{constructor(e){this.video=e,this.video.muted=!0,this.video.playsInline=!0,this.video.loop=!0,this.loaded=!1,this.init()}async init(){window.Hls||await new Promise((e,s)=>{const i=document.createElement("script");i.src="/js/hls.js",i.onload=()=>{window.Hls?e():s(new Error("Hls failed to load"))},i.onerror=s,document.head.appendChild(i)}),window.Hls&&window.Hls.isSupported()?this.hls=new window.Hls:this.hls=null,this.load()}load(){const e=this.video.dataset.src;!e||this.video.src||(typeof Hls<"u"&&Hls.isSupported()?(this.hls.loadSource(e),this.hls.attachMedia(this.video)):this.video.canPlayType("application/vnd.apple.mpegurl")&&(this.video.src=e),this.video.dataset.loaded="true",this.loaded=!0)}async play(){if(!this.video)return;this.loaded||this.load();const e=()=>{this.video.play().catch(()=>{setTimeout(e,100)})};this.video.readyState>=2?e():this.video.addEventListener("loadeddata",e,{once:!0})}pause(){this.video.readyState>=2?this.video.pause():this.video.addEventListener("loadeddata",()=>{this.video.pause()},{once:!0})}}export{d as v};
